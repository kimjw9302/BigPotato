# 알뜰살뜰 BIXBY Capsule  by Big Potato

알뜰살뜰은 사용자의 위치 및 발화한 지역을 기준으로 농수산물의 가격 제공 및 가격 비교를 해주어 사용자로 하여금 알뜰살뜰한 소비를 하도록 도와주는 Capsule입니다.
알뜰살뜰은 한국농수산식품유통공사(이하 kamis)에서 제공하는 API를 활용하여 유통되는 농수산물의 최근 30일간의 데이터를 비교하여 현재 가격, 최근 동향, 평균 가격, 최고가 및 최저가, 그래프를 사용자에게 보여줘 알뜰살뜰한 소비 생활을 도와주는 캡슐입니다. 또한, 카카오 API를 통해 현재 사용자 위치에 기반한 정보를 제공해줍니다. 모든 정보는 제작한 API 서버로부터 전처리 후에 캡슐에 보내지게 됩니다.

1) 제공가능한 품목
식량작물(7품목 : 8품종)
쌀, 찹쌀, 콩(백태국산), 팥(국산), 녹두, 고구마(밤), 감자(수미, 대지마)

채소(32품목：45품종)
배추(봄, 고랭지, 가을, 월동), 양배추, 시금치, 상추(적, 청), 얼갈이배추, 수박, 참외, 오이(가시, 다다기, 취청), 호박(애호박, 쥬키니), 토마토, 방울토마토(방울토마토, 대추방울토마토), 딸기, 무(봄, 고랭지, 가을, 월동), 당근(무세척), 열무, 건고추(화건, 양건), 풋고추, 청양고추, 꽈리고추, 붉은고추, 깐마늘(국산), 양파, 대파, 쪽파, 생강(국산), 미나리, 깻잎, 피망(청), 파프리카, 멜론, 갓, 고춧가루(국산, 수입)

특용작물(7품목：11품종)
참깨(국산백색, 중국, 인도), 땅콩(국산, 수입), 느타리버섯(느타리버섯, 애느타리버섯), 팽이버섯, 새송이버섯, 호두(수입), 아몬드(수입)

과실(15품목：30품종)
사과(후지, 쓰가루, 홍로), 배(신고, 원황), 복숭아(백도), 포도(캠벨얼리, 거봉, MBA, 샤인머스켓, 레드글로브 칠레, 레드글로브 페루, 톰슨 미국, 톰슨 호주), 감귤(노지, 시설), 감(단감), 바나나(수입), 오렌지(네이블 미국, 네이블 EU, 네이블 호주, 발렌시아 미국), 레몬(수입), 체리(수입), 건포도(수입), 건블루베리(수입), 참다래(국산, 수입), 파인애플(수입), 망고(수입)

축산물(5품목：19종류)
쇠고기(한우 : 갈비, 등심, 설도, 양지, 안심, 수입육[미국산 : 갈비(bone-in short rib), 갈비살(boneless short rib), 설도(bottom round)], [호주산 : 갈비, 등심, 설도]), 돼지고기(삼겹살[국산, 수입], 목살, 갈비, 앞다리살), 닭고기(도계), 계란, 우유

수산물(16품목：22품종)
고등어(국산[생선, 냉동, 염장], 수입냉동), 꽁치(수입냉동), 갈치(생선, 냉동), 명태(냉동), 물오징어(생선, 냉동), 건멸치, 건오징어, 김(마른김, 얼구운김), 건미역, 굴, 새우젓, 멸치액젓, 굵은소금, 조기(수입부세), 전복, 새우(수입흰다리냉동)

제철 과일(예 : 딸기) 등은 최근 조사 결과가 없을 경우, '한 달간의 정보가 없다'고 보여집니다.

2) 조사 지역
서울, 부산, 대구, 인천, 광주, 대전, 울산, 세종, 수원, 의정부, 춘천, 청주, 전주, 순천, 포항, 안동, 창원, 제주
위의 18개 도시와 더불어 고성, 속초 양양, 여수, 익산 등 '시' 이름으로 발화하면 가까운 대표 도시의 정보를 보여줍니다.
근처에서, 우리 동네에서와 같은 발화에서도 위도·경도를 기반으로 현재 위치를 특정하고, 가장 가까운 대표 도시를 기준으로 정보를 보여줍니다.


0. Capsule의 상세 화면
- 발화 화면
- 선택 화면
- 최종 화면



1. API서버 제공 데이터
- 사용자 위치 기반 
    action (String) : getItemList
    itemname (String-encoding(utf-8)) : 농수산물의 이름(한글처리를 위해 UTF-8 인코딩)
    lat (String) : 경도
    rat (String) : 위도
{"count":1,"location":"전주","data":[{"itemgroupcode":"100","itemgroupname":"식량작물","itemcode":"152","itemname":"감자","kindcode":"01","kindname":"수미","productrankcode":"04","imgURL":"https://www.kamis.or.kr/ckeditor/imageUpload/g1_1546394536006.JPG"}],"food":[{"foodName":"감자","maxP":2300,"minP":1980,"medP":2140,"resentP":2140,"persent":0,"chartURL":"http://serverIP:8080/bixby/charts/100_152_01_04_3511.jpg","msg":"평균가격 보다 0% 더 비쌉니다.","date":"2019-10-30","unit":"1kg"}],"msg":"200"}

- 발화 위치 기반
    action (String) : getItemListandlocation
    itemname (String-encoding(utf-8)) : 농수산물의 이름(한글처리를 위해 UTF-8 인코딩)
    location(String-encoding(utf-8)) : 발화지역명(한글처리를 위해 UTF-8 인코딩)
    lat (String) : 경도
    rat (String) : 위도
{"count":1,"location":"서울","data":[{"itemgroupcode":"100","itemgroupname":"식량작물","itemcode":"152","itemname":"감자","kindcode":"01","kindname":"수미","productrankcode":"04","imgURL":"https://www.kamis.or.kr/ckeditor/imageUpload/g1_1546394536006.JPG"}],"food":[{"foodName":"감자","maxP":2300,"minP":1700,"medP":2076,"resentP":2080,"persent":0,"chartURL":"http://serverIP:8080/bixby/charts/100_152_01_04_1101.jpg","msg":"평균가격 보다 0% 더 비쌉니다.","date":"2019-10-30","unit":"1kg"}],"msg":"200"}

2. 지역 매핑
서울, 부산, 대구, 인천, 광주, 대전, 울산, 세종, 수원, 의정부, 춘천, 청주, 전주, 순천, 포항, 안동, 창원, 제주
위의 18개 도시와 더불어 강원 - 춘천, 경남 - 부산, 경북 - 포항, 충남 - 대전, 충북 - 청주, 전남 - 순천, 전북 - 전주, 경기 - 수원으로 각각 매핑되어 
있습니다.

vocab(LocaName) {
"서울"{"서울","서울특별시","서울시"}
"부산"{"부산","부산시","부산광역시"}
"춘천"{"철원","화천","양구","인제","춘천","홍천","횡성","평창","원주","영월","정선","고성","속초","양양","강릉","동해","삼척","태백"}
"의정부"{"의정부","연천","파주","고양","양주","동두천","포천","남양주","가평"}
"수원"{"경기","경기도","과천","광명","군포","김포","부천","성남","수원","시흥","안산","안성","안양","여주","오산","용인","의왕","이천","평택","하남","화성"}
"창원"{"창원","마산","진주","진해","통영","사천","김해","밀양","거제","양산","의령","함안","창녕","고성","남해","하동","산청","함양","거창","합천"}
"안동"{"안동","영주","봉화","울진","영양","문경","예천","상주","구미","의성","김천","성주","칠곡","고령"}
"포항"{"포항","영덕","청송","영천","경주","경산","청도","군위","울릉"}
"순천"{"목포","여수","순천","나주","광양","담양","곡성","구례","고흥","보성","화순","장흥","강진","해남","영암","무안","함평","영광","장성","완도","진도","신안"}
"전주"{"전주","군산","익산","정읍","남원","김제","완주","진안","무주","장수","임실","순창","고창","부안"}
"대전"{"대전","대전광역시","천안","공주","보령","아산","서산","논산","계룡","당진","금산","연기","부여","서천","청양","홍성","예산","태안"}
"울산"{"울산","울산시","울산광역시"}
"대구"{"대구","대구광역시","대구시"}
"인천"{"인천","인천시","인천광역시"}
"광주"{"광주","광주광역시","광주시"}
"제주"{"제주","제주시","서귀포시","서귀포","제주도"}
"청주"{"청주","충주","제천","제천","청원","보은","옥천","영동","진천","괴산","음성","단양","증평"}
"세종"{"세종","세종시"}
}



3. 에러 처리
NotFoundData : 농수산물 이름이 데이터베이스에 존재하지 않는 경우
NotFoundLocation : 미리 지정한 지역 범주(vocab) 외의 지역을 입력받는 경우
NoHaveJson : 해당 농수산물의 최근 정보가 없는 경우
NotFoundItem : NoParameter : 발화 정보가 부족한 경우
Unknown_Error : 서버에 에러가 발생한 경우